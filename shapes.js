function decode(cells) {
    var rows = cells.split("\n");
    var result = [];
    var maxWidth = 0;
    var height = rows.length;
    for(var i=0; i<rows.length; i++)
        maxWidth = Math.max(maxWidth, rows[i].length);
    for(var i=0; i<height; i++) {
        var row = [];
        for(var j=0; j<maxWidth; j++) {
            row[j] = (rows[i][j] == 'O')?1:0;
        }
        result.push(row)
    }
    return result;
}

function createShapeDataUrl(shapeArray, scale) {
    // Create canvas
   const canvas = document.createElement('canvas');
   const ctx = canvas.getContext('2d');
   // Set width and height
   canvas.width = shapeArray[0].length*scale;
   canvas.height = shapeArray.length*scale;

   ctx.beginPath();
   ctx.fillStyle = '#eeeeee';
   ctx.fillRect(0, 0, canvas.width, canvas.height);
   ctx.fill();
    for(var i=0; i<canvas.height/scale; i++) {
        for(var j=0; j<canvas.width/scale; j++) {
            if(shapeArray[i][j]) {
                ctx.fillStyle = '#000000';
                ctx.fillRect(j*scale, i*scale, scale, scale);
            }
        }
    }
    ctx.fill();

   return canvas.toDataURL('image/png');
}



const _glider = 
`.O
..O
OOO`;

const _copperhead = 
`.OO..OO.
...OO...
...OO...
O.O..O.O
O......O
........
O......O
.OO..OO.
..OOOO..
........
...OO...
...OO...`;

const _loafer = 
`.OO..O.OO
O..O..OO.
.O.O.....
..O......
........O
......OOO
.....O...
......O..
.......OO`;

const _weekender = 
`.O............O
.O............O
O.O..........O.O
.O............O
.O............O
..O...OOOO...O
......OOOO
..OOOO....OOOO
...........
....O......O
.....OO..OO`;

const _lobster = 
`...........OOO............
.............O............
........OO..O.............
........OO................
............OO............
...........OO.............
..........O..O............
..........................
........O..O..............
.......O...O..............
......O.OOO...............
.....O....................
.....O.............O.O..OO
......O.............OO.O.O
.OO.............OO..O....O
O..OO..OO......O...O......
.....O..O......O......OO..
.........OO....O.O....OO..
..O...O...O.....O.........
......OO....O..O..........
.O.O.....O...OO...........
OO........O...............
.....O....O...............
.......O...O..............
....OO.....O..............
....O.....O...............`;

const _coeShip = 
`....OOOOOO
..OO.....O
OO.O.....O
....O...O
......O
......OO
.....OOOO
.....OO.OO
.......OO`;

const _sirRobin = 
`....OO.........................
....O..O.......................
....O...O......................
......OOO......................
..OO......OOOO.................
..O.OO....OOOO.................
.O....O......OOO...............
..OOOO....OO...O...............
O.........OO...................
.O...O.........................
......OOO..OO..O...............
..OO.......O....O..............
.............O.OO..............
..........OO......O............
...........OO.OOO.O............
..........OO...O..O............
..........O.O..OO..............
..........O..O.O.O.............
..........OOO......O...........
...........O.O.O...O...........
..............OO.O.O...........
...........O......OOO..........
...............................
...........O.........O.........
...........O...O......O........
............O.....OOOOO........
............OOO................
................OO.............
.............OOO..O............
...........O.OOO.O.............
..........O...O..O.............
...........O....OO.OOO.........
.............OOOO.O....OO......
.............O.OOOO....OO......
...................O...........
....................O..OO......
....................OO.........
.....................OOOOO.....
.........................OO....
...................OOO......O..
....................O.O...O.O..
...................O...O...O...
...................O...OO......
..................O......O.OOO.
...................OO...O...OO.
....................OOOO..O..O.
......................OO...O...
.....................O.........
.....................OO.O......
....................O..........
...................OOOOO.......
...................O....O......
..................OOO.OOO......
..................O.OOOOO......
..................O............
....................O..........
................O....OOOO......
....................OOOO.OO....
.................OOO....O......
........................O.O....
............................O..
........................O..OO..
.........................OOO...
......................OO.......
.....................OOO.....O.
........................OO..O.O
.....................O..OOO.O.O
......................OO.O..O..
........................O.O..OO
..........................OO...
......................OOO....O.
......................OOO....O.
.......................OO...OOO
........................OO.OO..
.........................OO....
.........................O.....
...............................
........................OO.....
..........................O....`;

const _codership = 
`...................OO....................
...................OOOO..................
...................O.OO..................
.........................................
....................O....................
...................OO....................
...................OOO...................
.....................O...................
.................................OO......
.................................OO......
.........................................
.........................................
.........................................
.........................................
.........................................
.........................................
....................................O....
...................................OO....
..................................O...O..
...................................OO..O.
........................................O
.....................................O.O.
......................................O..
......................................O..
......................................OO.
......................................OO.
.........................................
.........................................
.............O..........O................
............OOOOO.....O.OO...........O...
...........O..........O...O.........O....
............OO........OOO.O.........OO...
.............OO.........OO............O..
OO.............O.....................OOO.
OO...................................OOO.
.........................................
.........................................
.........................................
.........................................
.........................................
.........................................
........OO...............................
........OO...........OO..................
...................OO..O.................
........................O...O............
..................O.....O...O............
...................O..OO...O.O...........
....................OOO.....O............
............................O............`;

const _seal = 
`..OO
.OOO.OOO
...O...OO
OO.OO..O..O.O
O......O.OOOO
......OO.O..O
O....OO...O.OO
OO........O.O..O
O..OOOOO.OOO....O
.O.........O....O
.OO.O..O...O...O
..O.........OO
.........OO..OO....O
..O...OO.O....OOO..O
...OO.O.OOOOO.....O.OO
.......OO.OO.OO.OO..OOO
.................O.O....O
........OO....O.O...OOOOOO
.............O.......OO
.............O...O
.............O....O...OOO......O
..............OOOOO...OO.OO..OO.OO
.................OO.O..O.OO..O
................OO.....O....O..OOO
...............OOO.O.O.O.O
......................O..O
..................O.O
...................O
...
.....................OOO
.....................OOO
...
....................OO
....................OO
.....................O`;

const _pushalong = 
`...O
.O..O
O...O
O...O
OO.O
.....OO
..O..OO
....O
.......OOO
......OOOOO
.....OO.OOO
......OO`

const shapes = {
    glider: decode(_glider),
    copperhead: decode(_copperhead),
    loafer: decode(_loafer),
    weekender: decode(_weekender),
    lobster: decode(_lobster),
    coeShip: decode(_coeShip),
    sirRobin: decode(_sirRobin),
    codership: decode(_codership),
    seal: decode(_seal),
    pushalong: decode(_pushalong)

}
